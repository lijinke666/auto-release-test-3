name: 🎉  Release Notify

on:
  release:
    types: [published, edited]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - uses: visiky/dingtalk-release-notify@main
        with:
          DING_TALK_TOKEN: ${{ secrets.DING_TALK_GROUP_TOKEN }}
          notify_title: '🎉 {release_tag} 发布 🎉'
          notify_body: '## { title }<hr /> ![preview](https://gw.alipayobjects.com/zos/antfincdn/WWAv%24ctWd/da21d637-2232-4a64-a994-c0227ab759e2.png) <hr /> \n { body } <hr />'
          at_all: false

      - name: Release success ding talk official group notify
        uses: zcong1993/actions-ding@master
        with:
          dingToken: ${{ secrets.DING_TALK_GROUP_TOKEN }}
          body: |
            {
              "msgtype": "markdown",
              "markdown": {
                "title": "🎉 新版本发布",
                "text": "<hr /> ![preview](https://gw.alipayobjects.com/zos/antfincdn/ISzgBCtgR/2c5c4aaa-4f40-46f7-8f6b-427fa9ff07bb.png) \n > [🔗 查看详情](https://github.com/antvis/S2/releases)",
              }
            }
